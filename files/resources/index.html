<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Resources â€“ ThriveWell</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/resources.css">
    <link rel="icon" href="../img/favicon.ico">
</head>
<body>

<div id="header"></div>
<script>
fetch('../templates/header.html')
  .then(res => res.text())
  .then(html => {
      document.getElementById('header').innerHTML = html;
      initMobileMenu();
  });
</script>

<main>

<!-- ZIP CODE RESOURCES -->
<section class="section-soft section-wrap">
    <div class="section-inner zip-code-resources">
        <h2>Find Local Mental Health Resources</h2>
        <p>Enter your zip code to discover nearby clinics, support groups, and hotlines.</p>

        <div class="zip-search">
            <input type="text" id="zipInput" placeholder="Enter Zip Code">
            <button onclick="searchZip()">Search</button>
        </div>

        <div id="resourceResults" class="resource-grid"></div>
        <div id="noResults" class="no-results hidden">No resources found for this zip code.</div>
    </div>
</section>

<!-- GENERAL RESOURCES -->
<section class="section-plain section-wrap">
    <div class="section-inner">
        <h2>Trusted Mental Health Resources</h2>
        <p>Educational articles, organizations, and tools you can rely on.</p>

        <div class="resource-grid">
            <div class="resource-card">
                <h4>NAMI</h4>
                <p>Support, education, and advocacy from the National Alliance on Mental Illness.</p>
            </div>
            <div class="resource-card">
                <h4>Psychology Today</h4>
                <p>Expert-written articles covering mental health, therapy, and wellness.</p>
            </div>
            <div class="resource-card">
                <h4>Verywell Mind</h4>
                <p>Evidence-based mental health information and coping strategies.</p>
            </div>
            <div class="resource-card">
                <h4>Headspace</h4>
                <p>Guided meditation and mindfulness practices for everyday life.</p>
            </div>
        </div>
    </div>
</section>

<!-- STATISTICS -->
<section class="section-soft section-wrap">
    <div class="section-inner">
        <h2>Mental Health by the Numbers</h2>
        <p>Data-driven insight into mental health conditions worldwide.</p>

        <div class="stats-card">
            <div class="stats-toggle">
                <button id="usBtn" class="active">United States</button>
                <button id="worldBtn">Worldwide</button>
            </div>
            <canvas id="mentalHealthChart"></canvas>
        </div>
    </div>
</section>

</main>

<div id="footer"></div>
<script>
fetch('../templates/footer.html')
  .then(res => res.text())
  .then(html => document.getElementById('footer').innerHTML = html);
</script>

<!-- ZIP CODE DATA -->
<script>
const zipResources = {
    "92801": [
        {name: "OC Mental Health Clinic", description: "Affordable therapy and counseling services."},
        {name: "ThriveWell Support Group", description: "Weekly peer support meetings."},
        {name: "24/7 Crisis Line", description: "Call or text 988 for immediate help."}
    ]
};

function searchZip() {
    const zip = document.getElementById('zipInput').value.trim();
    const results = document.getElementById('resourceResults');
    const noResults = document.getElementById('noResults');
    results.innerHTML = "";

    if (zipResources[zip]) {
        zipResources[zip].forEach(r => {
            const div = document.createElement('div');
            div.className = "resource-card";
            div.innerHTML = `<h4>${r.name}</h4><p>${r.description}</p>`;
            results.appendChild(div);
        });
        noResults.classList.add("hidden");
    } else {
        noResults.classList.remove("hidden");
    }
}
</script>

<!-- CHART.JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('mentalHealthChart');
let chart;

const usData = [31, 28, 8, 9, 24];
const worldData = [26, 22, 7, 6, 39];

function loadChart(data) {
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Anxiety', 'Depression', 'PTSD', 'Eating Disorders', 'Other'],
            datasets: [{
                data,
                backgroundColor: ['#378056','#5d825a','#8fbf9f','#b5d7c1','#dfeee4'],
                borderWidth: 0
            }]
        },
        options: {
            plugins: { legend: { position: 'bottom' } }
        }
    });
}

document.getElementById('usBtn').onclick = () => {
    loadChart(usData);
    usBtn.classList.add("active");
    worldBtn.classList.remove("active");
};

document.getElementById('worldBtn').onclick = () => {
    loadChart(worldData);
    worldBtn.classList.add("active");
    usBtn.classList.remove("active");
};

loadChart(usData);
</script>

</body>
</html>
